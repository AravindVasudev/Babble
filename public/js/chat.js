"use strict";var socket=io(),audio=new Audio("media/chat.mp3");$("form").submit(function(){return""!==$("#type-message").val()&&(socket.emit("chat message",$("#type-message").val()),$("#type-message").val(""),!1)}),socket.on("chat message",function(e){var s="";s=e.id==$("#userid").val()?'<div class="message-me"><span class="msg">'+e.msg+'</span><span class="time noselect">'+e.time+"</span></div>":'<div class="message"><span class="username noselect">'+e.name+'</span><span class="msg">'+e.msg+'</span><span class="time noselect">'+e.time+"</span></div>",audio.play(),navigator.vibrate(100),$("#messages").append(s),$(".messages").scrollTop($(".messages").children().height())}),socket.on("chat image",function(e){var s="";s=e.id==$("#userid").val()?'<div class="message-me"><span class="image"><img src="'+e.image+'" class="img-responsive"></span><span class="time noselect">'+e.time+"</span></div>":'<div class="message"><span class="username noselect">'+e.name+'</span><span class="image"><img src="'+e.image+'" class="img-responsive"></span><span class="time noselect">'+e.time+"</span></div>",audio.play(),navigator.vibrate(100),$("#messages").append(s),$(".messages").scrollTop($(".messages").children().height())}),socket.on("join",function(e){var s="";s=e.id==$("#userid").val()?'<div class="message-bot noselect"><kbd>you joined the chatroom</kbd></div>':'<div class="message-bot noselect"><kbd>'+e.user+" has joined</kbd></div>",$("#messages").append(s),$(".messages").scrollTop($(".messages").children().height())}),socket.on("bot",function(e){var s='<div class="message-bot noselect"><kbd>'+e.msg+"</kbd></div>";$("#messages").append(s),$(".messages").scrollTop($(".messages").children().height())}),socket.on("leave",function(e){var s="";s=e.id==$("#userid").val()?'<div class="message-bot noselect"><kbd>disconnected</kbd></div>':'<div class="message-bot noselect"><kbd>'+e.user+" has left</kbd></div>",$("#messages").append(s),$(".messages").scrollTop($(".messages").children().height())}),$(function(){function e(e){e=e||document.documentElement,document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}$(".emoji").click(function(){var e=$("#type-message");e.val(""+e.val()+$(this).text()),e.focus()}),$(".emoji").contextmenu(function(){return socket.emit("chat message",'<span class="memoji">'+$(this).text()+"</span>"),!1}),$(".dropdown").on("show.bs.dropdown",function(e){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$(".dropdown").on("hide.bs.dropdown",function(e){$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()});var s=["jpg","jpeg","png"];$("#file").change(function(){var e=this.files[0],n=e.name.split(".").pop().toLowerCase();if(s.indexOf(n)>-1){var a=new FileReader;a.addEventListener("load",function(){socket.emit("chat image",a.result)},!1),file&&a.readAsDataURL(e)}else $("#messages").append('<div class="message-bot noselect"><kbd>Not an Image!</kbd></div>'),$(".messages").scrollTop($(".messages").children().height())}),$(".image > img").click(function(){e(this)})});